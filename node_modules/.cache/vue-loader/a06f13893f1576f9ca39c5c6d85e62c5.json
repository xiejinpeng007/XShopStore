{"remainingRequest":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/cart.vue","mtime":1561089064678},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport store from \"@/store.js\";\nimport cookieutil from \"@/utils/cookieutil.js\";\n\nexport default {\n  name: \"cart\",\n  data() {\n    return {\n      cartGoodsItems: store.store.cartGoodsItems,\n      allChecked: true,\n      totoalPrice: 0\n    };\n  },\n  created() {\n    this.cartGoodsItems = store.store.cartGoodsItems;\n    // eslint-disable-next-line\n    console.log(this.cartGoodsItems);\n  },\n  mounted() {\n    this.refreshPageStatus();\n    store.store.addItem2Order();\n  },\n  methods: {\n    onDelete(index) {\n      if (this.cartGoodsItems == null) return;\n      store.store.removeItemFromCart(this.cartGoodsItems[index].barCode);\n      this.cartGoodsItems = store.store.cartGoodsItems;\n      this.refreshPageStatus();\n      console.log(index);\n    },\n    onAllCheckedChanged(event) {\n      console.log(\"onAllCheckedChanged\");\n      console.log(event);\n      this.cartGoodsItems = this.cartGoodsItems.map(it => {\n        it.checked = !this.allChecked;\n        return it;\n      });\n      this.calTotalPrice();\n    },\n    onCheckedChanged(index) {\n      console.log(\"onCheckedChanged\");\n      this.cartGoodsItems[index].checked = !this.cartGoodsItems[index].checked;\n      this.refreshPageStatus();\n    },\n    refreshPageStatus() {\n      this.calTotalPrice();\n      this.calAllCheck();\n    },\n    calTotalPrice() {\n      this.totoalPrice = this.cartGoodsItems\n        .filter(it => it.checked == true)\n        .reduce(\n          (pre, cur, curIndex, arr) => pre + cur.salePrice * cur.quantity,\n          0\n        )\n        .toFixed(1);\n      store.store.addItem2Order();\n    },\n    calAllCheck() {\n      if (this.cartGoodsItems.length == 0) this.allChecked = false;\n      else this.allChecked = this.cartGoodsItems.every(it => it.checked);\n    },\n    //Listeners\n    onOrderClick() {\n      if (cookieutil.getCookie(\"token\") == null) this.$toast(\"请登录\");\n      else if (store.store.orderGoodsItems.length == 0)\n        this.$toast(\"未选中商品\");\n      else this.$router.push(\"/order\");\n    },\n    onStepChanged() {\n      this.calTotalPrice();\n    }\n  }\n};\n",{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cart.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div id=\"cart\">\n    <h1>购物车</h1>\n    <div class=\"cart-content\">\n      <van-swipe-cell\n        class=\"swipe-cell\"\n        v-for=\"(item,index) in cartGoodsItems\"\n        v-bind:key=\"item.barCode\"\n        :right-width=\"60\"\n        :style=\"{'-webkit-animation' : 'fade-in'+' '+ (index*0.2<3?(index*0.2):3) +'s',\n               'animation' : 'fade-in'+' '+ (index*0.2<3?(index*0.2):3) +'s'}\"\n      >\n        <div class=\"cell-content\">\n          <van-checkbox\n            style=\"flex-shrink:0\"\n            v-model=\"item.checked\"\n            checked-color=\"#F77938\"\n            @click=\"onCheckedChanged(index)\"\n          ></van-checkbox>\n          <label >{{item.name}}</label>\n          <van-stepper v-model=\"item.quantity\" integer :max=\"item.count\" @change=\"onStepChanged\"/>\n        </div>\n        <van-button\n          style=\"height:7vh\"\n          square\n          slot=\"right\"\n          type=\"danger\"\n          text=\"删除\"\n          @click=\"onDelete(index)\"\n        />\n      </van-swipe-cell>\n    </div>\n    <div class=\"bottom-layout van-hairline--top\">\n      <van-checkbox v-model=\"allChecked\" v-on:click=\"onAllCheckedChanged\" checked-color=\"#F77938\">全选</van-checkbox>\n      <label>合计：{{totoalPrice}}元</label>\n      <button class=\"cal-btn bg-gradual-orange\" v-on:click=\"onOrderClick\">结算</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport store from \"@/store.js\";\nimport cookieutil from \"@/utils/cookieutil.js\";\n\nexport default {\n  name: \"cart\",\n  data() {\n    return {\n      cartGoodsItems: store.store.cartGoodsItems,\n      allChecked: true,\n      totoalPrice: 0\n    };\n  },\n  created() {\n    this.cartGoodsItems = store.store.cartGoodsItems;\n    // eslint-disable-next-line\n    console.log(this.cartGoodsItems);\n  },\n  mounted() {\n    this.refreshPageStatus();\n    store.store.addItem2Order();\n  },\n  methods: {\n    onDelete(index) {\n      if (this.cartGoodsItems == null) return;\n      store.store.removeItemFromCart(this.cartGoodsItems[index].barCode);\n      this.cartGoodsItems = store.store.cartGoodsItems;\n      this.refreshPageStatus();\n      console.log(index);\n    },\n    onAllCheckedChanged(event) {\n      console.log(\"onAllCheckedChanged\");\n      console.log(event);\n      this.cartGoodsItems = this.cartGoodsItems.map(it => {\n        it.checked = !this.allChecked;\n        return it;\n      });\n      this.calTotalPrice();\n    },\n    onCheckedChanged(index) {\n      console.log(\"onCheckedChanged\");\n      this.cartGoodsItems[index].checked = !this.cartGoodsItems[index].checked;\n      this.refreshPageStatus();\n    },\n    refreshPageStatus() {\n      this.calTotalPrice();\n      this.calAllCheck();\n    },\n    calTotalPrice() {\n      this.totoalPrice = this.cartGoodsItems\n        .filter(it => it.checked == true)\n        .reduce(\n          (pre, cur, curIndex, arr) => pre + cur.salePrice * cur.quantity,\n          0\n        )\n        .toFixed(1);\n      store.store.addItem2Order();\n    },\n    calAllCheck() {\n      if (this.cartGoodsItems.length == 0) this.allChecked = false;\n      else this.allChecked = this.cartGoodsItems.every(it => it.checked);\n    },\n    //Listeners\n    onOrderClick() {\n      if (cookieutil.getCookie(\"token\") == null) this.$toast(\"请登录\");\n      else if (store.store.orderGoodsItems.length == 0)\n        this.$toast(\"未选中商品\");\n      else this.$router.push(\"/order\");\n    },\n    onStepChanged() {\n      this.calTotalPrice();\n    }\n  }\n};\n</script>\n\n<style>\n#cart {\n  width: 100%;\n  box-sizing: border-box;\n  overflow: hidden;\n  height: 100%;\n  padding-bottom: 8vh;\n  background-color: #f8f8f8;\n  display: flex;\n  flex-direction: column;\n  top: 0;\n}\n\ndiv.cart-content {\n  overflow: auto;\n}\n\n.swipe-cell {\n  height: 7vh;\n  width: 100%;\n  background-color: white;\n}\n\n.cell-content {\n  height: 7vh;\n  align-items: center;\n  padding-left: 5%;\n  padding-right: 5%;\n  display: flex;\n  justify-content: space-between;\n}\n\n.bottom-layout {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 5%;\n  position: absolute;\n  bottom: 8vh;\n  height: 8%;\n  right: 0;\n  left: 0;\n  background-color: white;\n}\n\n.cal-btn {\n  width: 30%;\n  height: 100%;\n  background-color: #f77938;\n  font-size: 18px;\n  font-weight: bold;\n  vertical-align: middle;\n  border: none;\n}\n\n.bg-gradual-orange {\n  background-image: linear-gradient(45deg, #ff9700, #ed1c24);\n  color: #fff;\n}\n</style>\n\n"]}]}
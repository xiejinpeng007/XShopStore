{"remainingRequest":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/cart.vue","mtime":1561544942691},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport cookieutil from \"@/utils/cookieutil.js\";\nimport { mapGetters, mapActions, mapState, mapMutations } from \"vuex\";\nimport { all } from \"q\";\n\nexport default {\n  name: \"cart\",\n  data() {\n    return {\n      allChecked: true\n    };\n  },\n  computed: {\n    ...mapState(\"cart\", [\"cartGoodsItems\", \"orderGoodsItems\"]),\n    ...mapGetters(\"cart\", [\"checkedTotalPrice\"]),\n    isAllChecked() {\n      if (this.cartGoodsItems.length == 0) return false;\n      else return this.cartGoodsItems.every(it => it.checked);\n    }\n  },\n  watch: {\n    isAllChecked(newValue) {\n      this.allChecked = newValue;\n    }\n  },\n  methods: {\n    ...mapMutations(\"cart\", [\n      \"addItem2Order\",\n      \"removeItemFromCart\",\n      \"setCartAllChecked\",\n      \"reverseCartItemChecked\",\n      \"changeQuantity\"\n    ]),\n    onDelete(index) {\n      if (this.cartGoodsItems == null) return;\n      this.removeItemFromCart(this.cartGoodsItems[index].barCode);\n      this.refreshPageStatus();\n      console.log(index);\n    },\n    onAllCheckedChanged(event) {\n      this.setCartAllChecked(!this.allChecked);\n    },\n    onCheckedChanged(index) {\n      this.reverseCartItemChecked(index);\n    },\n    calTotalPrice() {\n      this.totoalPrice = this.cartGoodsItems\n        .filter(it => it.checked == true)\n        .reduce((pre, cur) => pre + cur.salePrice * cur.quantity, 0)\n        .toFixed(1);\n    },\n    //Listeners\n    onOrderClick() {\n      if (cookieutil.getCookie(\"token\") == null) this.$toast(\"请登录\");\n      else if (this.checkedTotalPrice == 0) this.$toast(\"未选中商品\");\n      else this.$router.push(\"/order\");\n    },\n    onStepChanged(index, quantity) {\n      this.changeQuantity({ index, quantity });\n    }\n  }\n};\n",{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cart.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div id=\"cart\">\n    <h1>购物车</h1>\n    <div class=\"cart-content\">\n      <van-swipe-cell\n        class=\"swipe-cell\"\n        v-for=\"(item,index) in cartGoodsItems\"\n        :key=\"item.barCode\"\n        :right-width=\"60\"\n        :style=\"{'-webkit-animation' : 'fade-in'+' '+ (index*0.2<3?(index*0.2):3) +'s',\n               'animation' : 'fade-in'+' '+ (index*0.2<3?(index*0.2):3) +'s'}\"\n      >\n        <div class=\"cell-content\">\n          <van-checkbox\n            style=\"flex-shrink:0\"\n            v-model=\"item.checked\"\n            checked-color=\"#F77938\"\n            @click=\"onCheckedChanged(index)\"\n          ></van-checkbox>\n          <label style=\"max-width:50%\">{{item.name}}</label>\n          <van-stepper\n            :value=\"item.quantity\"\n            integer\n            :max=\"item.count\"\n            @change=\"v=>onStepChanged(index,v)\"\n          />\n        </div>\n        <van-button\n          style=\"height:7vh\"\n          square\n          slot=\"right\"\n          type=\"danger\"\n          text=\"删除\"\n          @click=\"onDelete(index)\"\n        />\n      </van-swipe-cell>\n    </div>\n    <div class=\"bottom-layout van-hairline--top\">\n      <van-checkbox v-model=\"allChecked\" @click=\"onAllCheckedChanged\" checked-color=\"#F77938\">全选</van-checkbox>\n      <label>合计：{{checkedTotalPrice}}元</label>\n      <button class=\"cal-btn bg-gradual-orange\" v-on:click=\"onOrderClick\">结算</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport cookieutil from \"@/utils/cookieutil.js\";\nimport { mapGetters, mapActions, mapState, mapMutations } from \"vuex\";\nimport { all } from \"q\";\n\nexport default {\n  name: \"cart\",\n  data() {\n    return {\n      allChecked: true\n    };\n  },\n  computed: {\n    ...mapState(\"cart\", [\"cartGoodsItems\", \"orderGoodsItems\"]),\n    ...mapGetters(\"cart\", [\"checkedTotalPrice\"]),\n    isAllChecked() {\n      if (this.cartGoodsItems.length == 0) return false;\n      else return this.cartGoodsItems.every(it => it.checked);\n    }\n  },\n  watch: {\n    isAllChecked(newValue) {\n      this.allChecked = newValue;\n    }\n  },\n  methods: {\n    ...mapMutations(\"cart\", [\n      \"addItem2Order\",\n      \"removeItemFromCart\",\n      \"setCartAllChecked\",\n      \"reverseCartItemChecked\",\n      \"changeQuantity\"\n    ]),\n    onDelete(index) {\n      if (this.cartGoodsItems == null) return;\n      this.removeItemFromCart(this.cartGoodsItems[index].barCode);\n      this.refreshPageStatus();\n      console.log(index);\n    },\n    onAllCheckedChanged(event) {\n      this.setCartAllChecked(!this.allChecked);\n    },\n    onCheckedChanged(index) {\n      this.reverseCartItemChecked(index);\n    },\n    calTotalPrice() {\n      this.totoalPrice = this.cartGoodsItems\n        .filter(it => it.checked == true)\n        .reduce((pre, cur) => pre + cur.salePrice * cur.quantity, 0)\n        .toFixed(1);\n    },\n    //Listeners\n    onOrderClick() {\n      if (cookieutil.getCookie(\"token\") == null) this.$toast(\"请登录\");\n      else if (this.checkedTotalPrice == 0) this.$toast(\"未选中商品\");\n      else this.$router.push(\"/order\");\n    },\n    onStepChanged(index, quantity) {\n      this.changeQuantity({ index, quantity });\n    }\n  }\n};\n</script>\n\n<style>\n#cart {\n  width: 100%;\n  box-sizing: border-box;\n  overflow: hidden;\n  height: 100%;\n  padding-bottom: 8vh;\n  background-color: #f8f8f8;\n  display: flex;\n  flex-direction: column;\n  top: 0;\n}\n\ndiv.cart-content {\n  overflow: auto;\n}\n\n.swipe-cell {\n  height: 7vh;\n  width: 100%;\n  background-color: white;\n}\n\n.cell-content {\n  height: 7vh;\n  align-items: center;\n  padding-left: 5%;\n  padding-right: 5%;\n  display: flex;\n  justify-content: space-between;\n}\n\n.bottom-layout {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 5%;\n  position: absolute;\n  bottom: 8vh;\n  height: 8%;\n  right: 0;\n  left: 0;\n  background-color: white;\n}\n\n.cal-btn {\n  width: 30%;\n  height: 100%;\n  background-color: #f77938;\n  font-size: 18px;\n  font-weight: bold;\n  vertical-align: middle;\n  border: none;\n}\n\n.bg-gradual-orange {\n  background-image: linear-gradient(45deg, #ff9700, #ed1c24);\n  color: #fff;\n}\n</style>\n\n"]}]}
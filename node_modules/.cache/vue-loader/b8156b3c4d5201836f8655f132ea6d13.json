{"remainingRequest":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/orderhistory.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/orderhistory.vue","mtime":1560505860780},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#orderhistory {\n  box-sizing: border-box;\n  overflow: hidden;\n  margin: 0;\n  height: 100%;\n  background-color: #f8f8f8;\n  display: flex;\n  flex-direction: column;\n}\n.order-i {\n  padding: 3%;\n  margin-top: 3%;\n  margin-left: 5%;\n  margin-right: 5%;\n  display: flex;\n  align-items: stretch;\n  flex-direction: column;\n  border-radius: 6px;\n  background-color: white;\n}\ndiv.orderhistory-content {\n  overflow: auto;\n  padding-bottom: 5vh;\n}\n.i-goodsdetail {\n  display: flex;\n  justify-content: space-between;\n}\n\n.align-self-end {\n  align-self: flex-end;\n}\n\nh1.sticky {\n  position: sticky;\n  top: 0;\n}\n",{"version":3,"sources":["orderhistory.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"orderhistory.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div id=\"orderhistory\">\n    <div class=\"orderhistory-content\">\n      <h1>历史订单</h1>\n      <div v-for=\"item in orderhistoryItems\" v-bind:key=\"item.barCode\">\n        <div class=\"order-i shadow-s\" v-for=\"i in item.payGoods\" v-bind:key=\"i.barCode\">\n          <label class=\"align-self-end\">{{item.payTime}}</label>\n          <div class=\"i-goodsdetail\">\n            <label style=\"flex-shrink:1\">{{i.goodsData.name}}</label>\n            <label style=\"  white-space: nowrap; margin-left:2%\">单价：{{i.goodsData.salePrice}}元</label>\n          </div>\n          <label class=\"align-self-end\">总价：{{toFixed1(i.spend)}}元</label>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport cookieutil from \"@/utils/cookieutil.js\";\nimport TimeUtil from \"@/utils/TimeUtil.js\";\n\nexport default {\n  name: \"orderhistory\",\n  data() {\n    return {\n      orderhistoryItems: [],\n      sumSpend: 0\n    };\n  },\n  created() {\n    this.requestOrderHistory();\n  },\n  methods: {\n    requestOrderHistory() {\n      const startDate = new Date();\n      const endDate = new Date();\n      startDate.setDate(new Date().getDay() - 30);\n      const start = this.date2String(startDate, \"yyyy-MM-dd hh:mm\");\n      const end = this.date2String(endDate, \"yyyy-MM-dd hh:mm\");\n\n      const token = cookieutil.getCookie(\"token\");\n      const params = new URLSearchParams();\n      params.append(\"token\", token);\n      params.append(\"start\", start);\n      params.append(\"end\", end);\n      params.append(\"offset\", 0);\n      params.append(\"limit\", 0);\n\n      axios\n        .post(\"/api_getPayHistory\", params)\n        .then(response => {\n          console.log(response.data);\n          this.orderhistoryItems = response.data.history.sort(function(\n            pre,\n            next\n          ) {\n            return pre.payTime > next.payTime ? -1 : 1;\n          });\n          this.sumSpend = response.data.sumSpend;\n          console.log(this.orderhistoryItems);\n        })\n        .catch(error => {});\n    },\n    date2String: function(date, fmt) {\n      //author: meizz\n      var o = {\n        \"M+\": date.getMonth() + 1, //月份\n        \"d+\": date.getDate(), //日\n        \"h+\": date.getHours(), //小时\n        \"m+\": date.getMinutes(), //分\n        \"s+\": date.getSeconds(), //秒\n        \"q+\": Math.floor((date.getMonth() + 3) / 3), //季度\n        S: date.getMilliseconds() //毫秒\n      };\n      if (/(y+)/.test(fmt))\n        fmt = fmt.replace(\n          RegExp.$1,\n          (date.getFullYear() + \"\").substr(4 - RegExp.$1.length)\n        );\n      for (var k in o)\n        if (new RegExp(\"(\" + k + \")\").test(fmt))\n          fmt = fmt.replace(\n            RegExp.$1,\n            RegExp.$1.length == 1\n              ? o[k]\n              : (\"00\" + o[k]).substr((\"\" + o[k]).length)\n          );\n      return fmt;\n    },\n    toFixed1(num) {\n      return num.toFixed(1);\n    }\n  }\n};\n</script>\n\n<style>\n#orderhistory {\n  box-sizing: border-box;\n  overflow: hidden;\n  margin: 0;\n  height: 100%;\n  background-color: #f8f8f8;\n  display: flex;\n  flex-direction: column;\n}\n.order-i {\n  padding: 3%;\n  margin-top: 3%;\n  margin-left: 5%;\n  margin-right: 5%;\n  display: flex;\n  align-items: stretch;\n  flex-direction: column;\n  border-radius: 6px;\n  background-color: white;\n}\ndiv.orderhistory-content {\n  overflow: auto;\n  padding-bottom: 5vh;\n}\n.i-goodsdetail {\n  display: flex;\n  justify-content: space-between;\n}\n\n.align-self-end {\n  align-self: flex-end;\n}\n\nh1.sticky {\n  position: sticky;\n  top: 0;\n}\n</style>\n\n\n"]}]}
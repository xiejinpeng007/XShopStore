{"remainingRequest":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/cart.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/cart.vue","mtime":1560497801198},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#cart {\n  box-sizing: border-box;\n  overflow: hidden;\n  margin: 0;\n  height: 100%;\n  background-color: #f8f8f8;\n}\n\n.swipe-cell {\n  height: 7vh;\n  width: 100%;\n  background-color: white;\n}\n\n.cell-content {\n  height: 7vh;\n  align-items: center;\n  padding-left: 5%;\n  padding-right: 5%;\n  display: flex;\n  justify-content: space-between;\n}\n\n.bottom-layout {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 5%;\n  height: 7%;\n  position: absolute;\n  bottom: 6%;\n  right: 0;\n  left: 0;\n  background-color: white;\n}\n\n.cal-btn {\n  width: 30%;\n  height: 100%;\n  background-color: #f77938;\n  font-size: 18px;\n  font-weight: bold;\n  vertical-align: middle;\n}\n\n.bg-gradual-orange {\n  background-image: linear-gradient(45deg, #ff9700, #ed1c24);\n  color: #fff;\n}\n",{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"cart.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div id=\"cart\">\n    <h1>购物车</h1>\n    <van-swipe-cell\n      class=\"swipe-cell\"\n      v-for=\"(item,index) in cartGoodsItems\"\n      v-bind:key=\"item.barCode\"\n      :right-width=\"60\"\n    >\n      <div class=\"cell-content\">\n        <van-checkbox\n          v-model=\"item.checked\"\n          checked-color=\"#F77938\"\n          v-on:click=\"onCheckedChanged(index)\"\n        ></van-checkbox>\n        <label class=\"goods-name\">{{item.name}}</label>\n        <van-stepper v-model=\"item.quantity\" integer :max=\"item.count\" @change=\"onStepChanged\"/>\n      </div>\n      <van-button style=\"height:7vh\" square slot=\"right\" type=\"danger\" text=\"删除\" v-on:click=\"onDelete(index)\"/>\n    </van-swipe-cell>\n    <div class=\"bottom-layout\">\n      <van-checkbox v-model=\"allChecked\" v-on:click=\"onAllCheckedChanged\" checked-color=\"#F77938\">全选</van-checkbox>\n      <label>合计：{{totoalPrice}}元</label>\n      <button class=\"cal-btn bg-gradual-orange\" v-on:click=\"onOrderClick\">结算</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport store from \"@/store.js\";\nimport cookieutil from \"@/utils/cookieutil.js\";\n\nexport default {\n  name: \"cart\",\n  data() {\n    return {\n      cartGoodsItems: store.store.cartGoodsItems,\n      allChecked: true,\n      totoalPrice: 0\n    };\n  },\n  created() {\n    this.cartGoodsItems = store.store.cartGoodsItems;\n    // eslint-disable-next-line\n    console.log(this.cartGoodsItems);\n  },\n  mounted() {\n    this.refreshPageStatus();\n    store.store.addItem2Order();\n  },\n  methods: {\n    onDelete(index) {\n      if (this.cartGoodsItems == null) return;\n      store.store.removeItemFromCart(this.cartGoodsItems[index].barCode);\n      this.cartGoodsItems = store.store.cartGoodsItems;\n      console.log(index);\n    },\n    onAllCheckedChanged(event) {\n      console.log(\"onAllCheckedChanged\");\n      console.log(event);\n      this.cartGoodsItems = this.cartGoodsItems.map(it => {\n        it.checked = !this.allChecked;\n        return it;\n      });\n      this.calTotalPrice();\n    },\n    onCheckedChanged(index) {\n      console.log(\"onCheckedChanged\");\n      this.cartGoodsItems[index].checked = !this.cartGoodsItems[index].checked;\n      this.refreshPageStatus();\n    },\n    refreshPageStatus() {\n      this.calTotalPrice();\n      this.calAllCheck();\n    },\n    calTotalPrice() {\n      this.totoalPrice = this.cartGoodsItems\n        .filter(it => it.checked == true)\n        .reduce(\n          (pre, cur, curIndex, arr) => pre + cur.salePrice * cur.quantity,\n          0\n        )\n        .toFixed(1);\n      store.store.addItem2Order();\n    },\n    calAllCheck() {\n      if (this.cartGoodsItems.length == 0) this.allChecked = false;\n      else this.allChecked = this.cartGoodsItems.every(it => it.checked);\n    },\n    //Listeners\n    onOrderClick() {\n      if (cookieutil.getCookie(\"token\") == null) this.$toast(\"请登录\");\n      else if (store.store.orderGoodsItems.length == 0)\n        this.$toast(\"未选中商品\");\n      else this.$router.push(\"/order\");\n    },\n    onStepChanged(){\n      this.calTotalPrice();\n    }\n  }\n};\n</script>\n\n<style>\n#cart {\n  box-sizing: border-box;\n  overflow: hidden;\n  margin: 0;\n  height: 100%;\n  background-color: #f8f8f8;\n}\n\n.swipe-cell {\n  height: 7vh;\n  width: 100%;\n  background-color: white;\n}\n\n.cell-content {\n  height: 7vh;\n  align-items: center;\n  padding-left: 5%;\n  padding-right: 5%;\n  display: flex;\n  justify-content: space-between;\n}\n\n.bottom-layout {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 5%;\n  height: 7%;\n  position: absolute;\n  bottom: 6%;\n  right: 0;\n  left: 0;\n  background-color: white;\n}\n\n.cal-btn {\n  width: 30%;\n  height: 100%;\n  background-color: #f77938;\n  font-size: 18px;\n  font-weight: bold;\n  vertical-align: middle;\n}\n\n.bg-gradual-orange {\n  background-image: linear-gradient(45deg, #ff9700, #ed1c24);\n  color: #fff;\n}\n</style>\n\n"]}]}
{"remainingRequest":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/babel-loader/lib/index.js!/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/simplestore.js","dependencies":[{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/simplestore.js","mtime":1561456530776},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport { isUndefined } from \"util\";\nvar store = {\n  cartGoodsItems: [],\n  orderGoodsItems: [],\n  token: null,\n  tempQrCode: null,\n  saveToken: function saveToken(token) {\n    this.token = token;\n  },\n  addItem2Cart: function addItem2Cart(item) {\n    item.quantity = 1;\n    item.checked = true;\n    var index = this.cartGoodsItems.findIndex(function (it) {\n      return it.barCode == item.barCode;\n    });\n    console.log(index);\n    if (index === -1) this.cartGoodsItems.push(item);else if (this.cartGoodsItems[index].quantity < this.cartGoodsItems[index].count) this.cartGoodsItems[index].quantity++;\n  },\n  removeItemFromCart: function removeItemFromCart(barCode) {\n    this.cartGoodsItems = this.cartGoodsItems.filter(function (item) {\n      return item.barCode != barCode;\n    });\n  },\n  addItem2Order: function addItem2Order() {\n    this.orderGoodsItems = this.cartGoodsItems.filter(function (it) {\n      return it.checked;\n    });\n  },\n  clearOrderAndRemoveFromCart: function clearOrderAndRemoveFromCart() {\n    this.orderGoodsItems = [];\n    this.cartGoodsItems = this.cartGoodsItems.filter(function (it) {\n      return !it.checked;\n    });\n  },\n  getTotalPrice: function getTotalPrice() {\n    return this.cartGoodsItems.filter(function (it) {\n      return it.checked == true;\n    }).reduce(function (pre, cur, curIndex, arr) {\n      return pre + cur.salePrice * cur.quantity;\n    }, 0).toFixed(1);\n  },\n  saveQrCode: function saveQrCode(qrCode) {\n    this.tempQrCode = qrCode;\n  },\n  getAndClearQrCode: function getAndClearQrCode() {\n    var qrCode = this.tempQrCode;\n    this.tempQrCode = null;\n    return qrCode;\n  }\n};\nexport default {\n  store: store\n};",{"version":3,"sources":["/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/simplestore.js"],"names":["isUndefined","store","cartGoodsItems","orderGoodsItems","token","tempQrCode","saveToken","addItem2Cart","item","quantity","checked","index","findIndex","it","barCode","console","log","push","count","removeItemFromCart","filter","addItem2Order","clearOrderAndRemoveFromCart","getTotalPrice","reduce","pre","cur","curIndex","arr","salePrice","toFixed","saveQrCode","qrCode","getAndClearQrCode"],"mappings":";AAAA,SAASA,WAAT,QAA4B,MAA5B;AAEA,IAAMC,KAAK,GAAG;AACVC,EAAAA,cAAc,EAAE,EADN;AAEVC,EAAAA,eAAe,EAAE,EAFP;AAGVC,EAAAA,KAAK,EAAE,IAHG;AAIVC,EAAAA,UAAU,EAAE,IAJF;AAMVC,EAAAA,SANU,qBAMAF,KANA,EAMO;AACb,SAAKA,KAAL,GAAaA,KAAb;AACH,GARS;AAUVG,EAAAA,YAVU,wBAUGC,IAVH,EAUS;AACfA,IAAAA,IAAI,CAACC,QAAL,GAAgB,CAAhB;AACAD,IAAAA,IAAI,CAACE,OAAL,GAAe,IAAf;AACA,QAAIC,KAAK,GAAG,KAAKT,cAAL,CAAoBU,SAApB,CAA8B,UAAAC,EAAE;AAAA,aAAIA,EAAE,CAACC,OAAH,IAAcN,IAAI,CAACM,OAAvB;AAAA,KAAhC,CAAZ;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYL,KAAZ;AACA,QAAIA,KAAK,KAAK,CAAC,CAAf,EAAkB,KAAKT,cAAL,CAAoBe,IAApB,CAAyBT,IAAzB,EAAlB,KACK,IAAI,KAAKN,cAAL,CAAoBS,KAApB,EAA2BF,QAA3B,GAAsC,KAAKP,cAAL,CAAoBS,KAApB,EAA2BO,KAArE,EACD,KAAKhB,cAAL,CAAoBS,KAApB,EAA2BF,QAA3B;AACP,GAlBS;AAoBVU,EAAAA,kBApBU,8BAoBSL,OApBT,EAoBkB;AACxB,SAAKZ,cAAL,GAAsB,KAAKA,cAAL,CAAoBkB,MAApB,CAA2B,UAAAZ,IAAI;AAAA,aAAIA,IAAI,CAACM,OAAL,IAAgBA,OAApB;AAAA,KAA/B,CAAtB;AACH,GAtBS;AAwBVO,EAAAA,aAxBU,2BAwBM;AACZ,SAAKlB,eAAL,GAAuB,KAAKD,cAAL,CAAoBkB,MAApB,CAA2B,UAAAP,EAAE;AAAA,aAAIA,EAAE,CAACH,OAAP;AAAA,KAA7B,CAAvB;AACH,GA1BS;AA4BVY,EAAAA,2BA5BU,yCA4BoB;AAC1B,SAAKnB,eAAL,GAAuB,EAAvB;AACA,SAAKD,cAAL,GAAsB,KAAKA,cAAL,CAAoBkB,MAApB,CAA2B,UAAAP,EAAE;AAAA,aAAI,CAACA,EAAE,CAACH,OAAR;AAAA,KAA7B,CAAtB;AACH,GA/BS;AAgCVa,EAAAA,aAhCU,2BAgCM;AACZ,WAAO,KAAKrB,cAAL,CACFkB,MADE,CACK,UAAAP,EAAE;AAAA,aAAIA,EAAE,CAACH,OAAH,IAAc,IAAlB;AAAA,KADP,EAEFc,MAFE,CAGC,UAACC,GAAD,EAAMC,GAAN,EAAWC,QAAX,EAAqBC,GAArB;AAAA,aAA6BH,GAAG,GAAGC,GAAG,CAACG,SAAJ,GAAgBH,GAAG,CAACjB,QAAvD;AAAA,KAHD,EAIC,CAJD,EAMFqB,OANE,CAMM,CANN,CAAP;AAOH,GAxCS;AAyCVC,EAAAA,UAzCU,sBAyCCC,MAzCD,EAyCS;AACf,SAAK3B,UAAL,GAAkB2B,MAAlB;AACH,GA3CS;AA4CVC,EAAAA,iBA5CU,+BA4CU;AAChB,QAAMD,MAAM,GAAG,KAAK3B,UAApB;AACA,SAAKA,UAAL,GAAkB,IAAlB;AACA,WAAO2B,MAAP;AACH;AAhDS,CAAd;AAmDA,eAAe;AAAE/B,EAAAA,KAAK,EAALA;AAAF,CAAf","sourcesContent":["import { isUndefined } from \"util\";\n\nconst store = {\n    cartGoodsItems: [],\n    orderGoodsItems: [],\n    token: null,\n    tempQrCode: null,\n\n    saveToken(token) {\n        this.token = token\n    },\n\n    addItem2Cart(item) {\n        item.quantity = 1;\n        item.checked = true;\n        var index = this.cartGoodsItems.findIndex(it => it.barCode == item.barCode)\n        console.log(index)\n        if (index === -1) this.cartGoodsItems.push(item)\n        else if (this.cartGoodsItems[index].quantity < this.cartGoodsItems[index].count)\n            this.cartGoodsItems[index].quantity++\n    },\n\n    removeItemFromCart(barCode) {\n        this.cartGoodsItems = this.cartGoodsItems.filter(item => item.barCode != barCode)\n    },\n\n    addItem2Order() {\n        this.orderGoodsItems = this.cartGoodsItems.filter(it => it.checked)\n    },\n\n    clearOrderAndRemoveFromCart() {\n        this.orderGoodsItems = [];\n        this.cartGoodsItems = this.cartGoodsItems.filter(it => !it.checked);\n    },\n    getTotalPrice() {\n        return this.cartGoodsItems\n            .filter(it => it.checked == true)\n            .reduce(\n                (pre, cur, curIndex, arr) => pre + cur.salePrice * cur.quantity,\n                0\n            )\n            .toFixed(1);\n    },\n    saveQrCode(qrCode) {\n        this.tempQrCode = qrCode;\n    },\n    getAndClearQrCode() {\n        const qrCode = this.tempQrCode;\n        this.tempQrCode = null;\n        return qrCode;\n    }\n}\n\nexport default { store }"]}]}
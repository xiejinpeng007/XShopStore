{"remainingRequest":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/babel-loader/lib/index.js!/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/orderhistory.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/orderhistory.vue","mtime":1560924944405},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport cookieutil from \"@/utils/cookieutil.js\";\nimport TimeUtil from \"@/utils/TimeUtil.js\";\nexport default {\n  name: \"orderhistory\",\n  data: function data() {\n    return {\n      orderhistoryItems: [],\n      sumSpend: 0\n    };\n  },\n  created: function created() {\n    this.requestOrderHistory();\n  },\n  methods: {\n    requestOrderHistory: function requestOrderHistory() {\n      var _this = this;\n\n      var startDate = new Date();\n      var endDate = new Date();\n      startDate.setDate(new Date().getDay() - 30);\n      var start = this.date2String(startDate, \"yyyy-MM-dd hh:mm\");\n      var end = this.date2String(endDate, \"yyyy-MM-dd hh:mm\");\n      var token = cookieutil.getCookie(\"token\");\n      var params = new URLSearchParams();\n      params.append(\"token\", token);\n      params.append(\"start\", start);\n      params.append(\"end\", end);\n      params.append(\"offset\", 0);\n      params.append(\"limit\", 0);\n      axios.post(\"/api_getPayHistory\", params).then(function (response) {\n        console.log(response.data);\n        _this.orderhistoryItems = response.data.history.sort(function (pre, next) {\n          return pre.payTime > next.payTime ? -1 : 1;\n        });\n        _this.sumSpend = response.data.sumSpend;\n        console.log(_this.orderhistoryItems);\n      }).catch(function (error) {});\n    },\n    date2String: function date2String(date, fmt) {\n      //author: meizz\n      var o = {\n        \"M+\": date.getMonth() + 1,\n        //月份\n        \"d+\": date.getDate(),\n        //日\n        \"h+\": date.getHours(),\n        //小时\n        \"m+\": date.getMinutes(),\n        //分\n        \"s+\": date.getSeconds(),\n        //秒\n        \"q+\": Math.floor((date.getMonth() + 3) / 3),\n        //季度\n        S: date.getMilliseconds() //毫秒\n\n      };\n      if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (date.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n\n      for (var k in o) {\n        if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : (\"00\" + o[k]).substr((\"\" + o[k]).length));\n      }\n\n      return fmt;\n    },\n    toFixed1: function toFixed1(num) {\n      return num.toFixed(1);\n    }\n  }\n};",{"version":3,"sources":["orderhistory.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"orderhistory\">\n    <div class=\"orderhistory-content\">\n      <h1>历史订单</h1>\n      <div v-for=\"item in orderhistoryItems\" v-bind:key=\"item.barCode\">\n        <div class=\"order-i shadow-s\" v-for=\"i in item.payGoods\" v-bind:key=\"i.barCode\">\n          <label class=\"align-self-end\">{{item.payTime}}</label>\n          <div class=\"i-goodsdetail\">\n            <label style=\"flex-shrink:1\">{{i.goodsData.name}}</label>\n            <label style=\"  white-space: nowrap; margin-left:2%\">单价：{{i.goodsData.salePrice}}元</label>\n          </div>\n          <label class=\"align-self-end\">总价：{{toFixed1(i.spend)}}元</label>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport axios from \"axios\";\nimport cookieutil from \"@/utils/cookieutil.js\";\nimport TimeUtil from \"@/utils/TimeUtil.js\";\n\nexport default {\n  name: \"orderhistory\",\n  data() {\n    return {\n      orderhistoryItems: [],\n      sumSpend: 0\n    };\n  },\n  created() {\n    this.requestOrderHistory();\n  },\n  methods: {\n    requestOrderHistory() {\n      const startDate = new Date();\n      const endDate = new Date();\n      startDate.setDate(new Date().getDay() - 30);\n      const start = this.date2String(startDate, \"yyyy-MM-dd hh:mm\");\n      const end = this.date2String(endDate, \"yyyy-MM-dd hh:mm\");\n\n      const token = cookieutil.getCookie(\"token\");\n      const params = new URLSearchParams();\n      params.append(\"token\", token);\n      params.append(\"start\", start);\n      params.append(\"end\", end);\n      params.append(\"offset\", 0);\n      params.append(\"limit\", 0);\n\n      axios\n        .post(\"/api_getPayHistory\", params)\n        .then(response => {\n          console.log(response.data);\n          this.orderhistoryItems = response.data.history.sort(function(\n            pre,\n            next\n          ) {\n            return pre.payTime > next.payTime ? -1 : 1;\n          });\n          this.sumSpend = response.data.sumSpend;\n          console.log(this.orderhistoryItems);\n        })\n        .catch(error => {});\n    },\n    date2String: function(date, fmt) {\n      //author: meizz\n      var o = {\n        \"M+\": date.getMonth() + 1, //月份\n        \"d+\": date.getDate(), //日\n        \"h+\": date.getHours(), //小时\n        \"m+\": date.getMinutes(), //分\n        \"s+\": date.getSeconds(), //秒\n        \"q+\": Math.floor((date.getMonth() + 3) / 3), //季度\n        S: date.getMilliseconds() //毫秒\n      };\n      if (/(y+)/.test(fmt))\n        fmt = fmt.replace(\n          RegExp.$1,\n          (date.getFullYear() + \"\").substr(4 - RegExp.$1.length)\n        );\n      for (var k in o)\n        if (new RegExp(\"(\" + k + \")\").test(fmt))\n          fmt = fmt.replace(\n            RegExp.$1,\n            RegExp.$1.length == 1\n              ? o[k]\n              : (\"00\" + o[k]).substr((\"\" + o[k]).length)\n          );\n      return fmt;\n    },\n    toFixed1(num) {\n      return num.toFixed(1);\n    }\n  }\n};\n</script>\n\n<style>\n#orderhistory {\n  box-sizing: border-box;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  height: 100%;\n  padding-bottom: 8vh;\n  background-color: #f8f8f8;\n  display: flex;\n  flex-direction: column;\n}\n.order-i {\n  padding: 3%;\n  margin-top: 3%;\n  margin-left: 5%;\n  margin-right: 5%;\n  display: flex;\n  align-items: stretch;\n  flex-direction: column;\n  border-radius: 6px;\n  background-color: white;\n  animation: fade-in 2s;\n  -webkit-animation: fade-in 2s;\n}\ndiv.orderhistory-content {\n  padding-bottom: 5vh;\n}\n.i-goodsdetail {\n  display: flex;\n  justify-content: space-between;\n}\n\n.align-self-end {\n  align-self: flex-end;\n}\n\nh1.sticky {\n  position: sticky;\n  top: 0;\n}\n</style>\n\n\n"],"sourceRoot":"src/pages"}]}
{"remainingRequest":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/babel-loader/lib/index.js!/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/src/pages/cart.vue","mtime":1561089064678},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jinpengxie/Documents/Vue/peipeipei-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport store from \"@/store.js\";\nimport cookieutil from \"@/utils/cookieutil.js\";\nexport default {\n  name: \"cart\",\n  data: function data() {\n    return {\n      cartGoodsItems: store.store.cartGoodsItems,\n      allChecked: true,\n      totoalPrice: 0\n    };\n  },\n  created: function created() {\n    this.cartGoodsItems = store.store.cartGoodsItems; // eslint-disable-next-line\n\n    console.log(this.cartGoodsItems);\n  },\n  mounted: function mounted() {\n    this.refreshPageStatus();\n    store.store.addItem2Order();\n  },\n  methods: {\n    onDelete: function onDelete(index) {\n      if (this.cartGoodsItems == null) return;\n      store.store.removeItemFromCart(this.cartGoodsItems[index].barCode);\n      this.cartGoodsItems = store.store.cartGoodsItems;\n      this.refreshPageStatus();\n      console.log(index);\n    },\n    onAllCheckedChanged: function onAllCheckedChanged(event) {\n      var _this = this;\n\n      console.log(\"onAllCheckedChanged\");\n      console.log(event);\n      this.cartGoodsItems = this.cartGoodsItems.map(function (it) {\n        it.checked = !_this.allChecked;\n        return it;\n      });\n      this.calTotalPrice();\n    },\n    onCheckedChanged: function onCheckedChanged(index) {\n      console.log(\"onCheckedChanged\");\n      this.cartGoodsItems[index].checked = !this.cartGoodsItems[index].checked;\n      this.refreshPageStatus();\n    },\n    refreshPageStatus: function refreshPageStatus() {\n      this.calTotalPrice();\n      this.calAllCheck();\n    },\n    calTotalPrice: function calTotalPrice() {\n      this.totoalPrice = this.cartGoodsItems.filter(function (it) {\n        return it.checked == true;\n      }).reduce(function (pre, cur, curIndex, arr) {\n        return pre + cur.salePrice * cur.quantity;\n      }, 0).toFixed(1);\n      store.store.addItem2Order();\n    },\n    calAllCheck: function calAllCheck() {\n      if (this.cartGoodsItems.length == 0) this.allChecked = false;else this.allChecked = this.cartGoodsItems.every(function (it) {\n        return it.checked;\n      });\n    },\n    //Listeners\n    onOrderClick: function onOrderClick() {\n      if (cookieutil.getCookie(\"token\") == null) this.$toast(\"请登录\");else if (store.store.orderGoodsItems.length == 0) this.$toast(\"未选中商品\");else this.$router.push(\"/order\");\n    },\n    onStepChanged: function onStepChanged() {\n      this.calTotalPrice();\n    }\n  }\n};",{"version":3,"sources":["cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"cart\">\n    <h1>购物车</h1>\n    <div class=\"cart-content\">\n      <van-swipe-cell\n        class=\"swipe-cell\"\n        v-for=\"(item,index) in cartGoodsItems\"\n        v-bind:key=\"item.barCode\"\n        :right-width=\"60\"\n        :style=\"{'-webkit-animation' : 'fade-in'+' '+ (index*0.2<3?(index*0.2):3) +'s',\n               'animation' : 'fade-in'+' '+ (index*0.2<3?(index*0.2):3) +'s'}\"\n      >\n        <div class=\"cell-content\">\n          <van-checkbox\n            style=\"flex-shrink:0\"\n            v-model=\"item.checked\"\n            checked-color=\"#F77938\"\n            @click=\"onCheckedChanged(index)\"\n          ></van-checkbox>\n          <label >{{item.name}}</label>\n          <van-stepper v-model=\"item.quantity\" integer :max=\"item.count\" @change=\"onStepChanged\"/>\n        </div>\n        <van-button\n          style=\"height:7vh\"\n          square\n          slot=\"right\"\n          type=\"danger\"\n          text=\"删除\"\n          @click=\"onDelete(index)\"\n        />\n      </van-swipe-cell>\n    </div>\n    <div class=\"bottom-layout van-hairline--top\">\n      <van-checkbox v-model=\"allChecked\" v-on:click=\"onAllCheckedChanged\" checked-color=\"#F77938\">全选</van-checkbox>\n      <label>合计：{{totoalPrice}}元</label>\n      <button class=\"cal-btn bg-gradual-orange\" v-on:click=\"onOrderClick\">结算</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport store from \"@/store.js\";\nimport cookieutil from \"@/utils/cookieutil.js\";\n\nexport default {\n  name: \"cart\",\n  data() {\n    return {\n      cartGoodsItems: store.store.cartGoodsItems,\n      allChecked: true,\n      totoalPrice: 0\n    };\n  },\n  created() {\n    this.cartGoodsItems = store.store.cartGoodsItems;\n    // eslint-disable-next-line\n    console.log(this.cartGoodsItems);\n  },\n  mounted() {\n    this.refreshPageStatus();\n    store.store.addItem2Order();\n  },\n  methods: {\n    onDelete(index) {\n      if (this.cartGoodsItems == null) return;\n      store.store.removeItemFromCart(this.cartGoodsItems[index].barCode);\n      this.cartGoodsItems = store.store.cartGoodsItems;\n      this.refreshPageStatus();\n      console.log(index);\n    },\n    onAllCheckedChanged(event) {\n      console.log(\"onAllCheckedChanged\");\n      console.log(event);\n      this.cartGoodsItems = this.cartGoodsItems.map(it => {\n        it.checked = !this.allChecked;\n        return it;\n      });\n      this.calTotalPrice();\n    },\n    onCheckedChanged(index) {\n      console.log(\"onCheckedChanged\");\n      this.cartGoodsItems[index].checked = !this.cartGoodsItems[index].checked;\n      this.refreshPageStatus();\n    },\n    refreshPageStatus() {\n      this.calTotalPrice();\n      this.calAllCheck();\n    },\n    calTotalPrice() {\n      this.totoalPrice = this.cartGoodsItems\n        .filter(it => it.checked == true)\n        .reduce(\n          (pre, cur, curIndex, arr) => pre + cur.salePrice * cur.quantity,\n          0\n        )\n        .toFixed(1);\n      store.store.addItem2Order();\n    },\n    calAllCheck() {\n      if (this.cartGoodsItems.length == 0) this.allChecked = false;\n      else this.allChecked = this.cartGoodsItems.every(it => it.checked);\n    },\n    //Listeners\n    onOrderClick() {\n      if (cookieutil.getCookie(\"token\") == null) this.$toast(\"请登录\");\n      else if (store.store.orderGoodsItems.length == 0)\n        this.$toast(\"未选中商品\");\n      else this.$router.push(\"/order\");\n    },\n    onStepChanged() {\n      this.calTotalPrice();\n    }\n  }\n};\n</script>\n\n<style>\n#cart {\n  width: 100%;\n  box-sizing: border-box;\n  overflow: hidden;\n  height: 100%;\n  padding-bottom: 8vh;\n  background-color: #f8f8f8;\n  display: flex;\n  flex-direction: column;\n  top: 0;\n}\n\ndiv.cart-content {\n  overflow: auto;\n}\n\n.swipe-cell {\n  height: 7vh;\n  width: 100%;\n  background-color: white;\n}\n\n.cell-content {\n  height: 7vh;\n  align-items: center;\n  padding-left: 5%;\n  padding-right: 5%;\n  display: flex;\n  justify-content: space-between;\n}\n\n.bottom-layout {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-left: 5%;\n  position: absolute;\n  bottom: 8vh;\n  height: 8%;\n  right: 0;\n  left: 0;\n  background-color: white;\n}\n\n.cal-btn {\n  width: 30%;\n  height: 100%;\n  background-color: #f77938;\n  font-size: 18px;\n  font-weight: bold;\n  vertical-align: middle;\n  border: none;\n}\n\n.bg-gradual-orange {\n  background-image: linear-gradient(45deg, #ff9700, #ed1c24);\n  color: #fff;\n}\n</style>\n\n"],"sourceRoot":"src/pages"}]}